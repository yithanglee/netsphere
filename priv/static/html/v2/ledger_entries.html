<section class="col-12  p-4">
    <div class="card ">
      <div class="card-body ">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h3>Ledger Entries</h3>
          </div>
        
        <div class="" id="tab1"></div>
      </div>
    </div>
  </section>
  <script type="text/javascript">
  $(document).ready(() => {

    var customCols = null;
    var random_id = phxApp.makeid(4)
    placement_group_sales_detailSource = new phoenixModel({
      onDrawFn: () => {
        setTimeout(() => {
          phxApp.formatDate()
        }, 200)
      },
  
      xcard: (params) => {
        console.log(params)
        var data = params
  
        var font_class = "text-success"
        if (data.direction == 'debit') {
          font_class = "text-danger"
        }
  
        var card = `
            <div class="row mt-2" >
             <div class="col-12 text-secondary format_datetime text-sm">` + data.inserted_at + `</div>
             
       
            </div>
            <div class="row d-none " >
             <div class="col-12 text-sm">` + data.remarks + `</div>
            </div>
  
            <div class="row border-1 border-top">
             <div class="col-6 text-start text-sm">Direction</div> 
             <div class="col-6 text-end text-sm">Amount</div>
            </div>
            <div class="row">
              <div class="col-6 text-start ">` + data.direction + `</div>
       
             <div class="col-6 text-end format-float ` + font_class + `">` + data.amount + `</div>
            
            </div>
  
            `
        return card
      },
      data: {
        grid_class: "col-12 ",
        dom: `
           <"row px-4 px-lg-0" 
            <"col-12 col-lg-6 "l>
            <"col-12 col-lg-6 text-lg-end "i>
          >
          <"row grid_view d-block d-lg-none">
          <"list_view d-none d-lg-block"t>
          <"row transform-75 px-4"
              <"col-lg-6 col-12">
              <"col-lg-6 col-12"p>
            >
        `,
        preloads: ["user", "asset"],
        additional_join_statements: [
        {
            user: "user"
          },    
        {
            asset: "asset"
          },
          
        ],
        additional_search_queries: [
          "a.user_id=" + phxApp.user.id + "|a.journal=asset"
        ],
      },
      columns: [
  
        { label: 'id', data: 'id' },
        { label: 'Date', data: 'inserted_at', formatDateTime: true, offset: 0 },
        {
          label: "Asset",
          data: "id",
          showChild: true,
          xdata: {
            child: 'asset',
            data: 'name'
          }
        },
        
        {
          customized: true,
          className: "text-end ",
          label: 'Amount',
          data: 'id',
          xdata: {
            formatFn: (d, index) => {
              html = `<div class="text-success format-float">` + d.amount + `</div>`
              if (d.direction == 'credit') {

              } else {
                html = `<div class="text-danger format-float">` + d.amount + `</div>`
              }
              return html
            }
          }
        },

  
        { label: 'Action', data: 'id', className: "d-none" }
  
      ],
      moduleName: "LedgerEntry",
      link: "LedgerEntry",
      customCols: customCols,
      buttons: [],
      tableSelector: "#" + random_id
    })
    placement_group_sales_detailSource.load(random_id, "#tab1")
  
  
  })
  </script>